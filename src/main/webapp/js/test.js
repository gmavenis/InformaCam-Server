function(doc){if(doc._id) {var res = {};var criteriaMet = 0;var keywords = ["frankie","butter"];var keywordsFound = 0;for(keyword in keywords) {for(kw in doc.keywords) {if(keyword == kw) {keywordsFound++;}}}if(keywordsFound > 0) {++criteriaMet;res['keywordRank'] = keywordsFound;}var upperBound = 1346593302309;var lowerBound = 1348296269605;if(doc.dateCreated >= lowerBound && doc.dateCreated <= upperBound) {++criteriaMet;}var mediaType = 400;if(doc.mediaType == mediaType) {++criteriaMet;}var meetsCriteria = 3;if(meetsCriteria==criteriaMet) {for(key in doc)res[key] = doc[key];emit(doc._id, res);}}}